[Uploading birthday_bot.py‚Ä¶]()
import asyncio
import logging
from datetime import datetime, timedelta
import os
from telegram import Bot
from telegram.error import TelegramError

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

# –ù–ê–°–¢–†–û–ô–ö–ò –ë–û–¢–ê - –ó–ê–ü–û–õ–ù–ò–¢–ï –°–í–û–ò–ú–ò –î–ê–ù–ù–´–ú–ò
BOT_TOKEN = os.environ.get('BOT_TOKEN', "8288059895:AAHwniisVwhP8fBmPTUJNTTCNOUKFC0r2Ws")
CHAT_ID = os.environ.get('CHAT_ID', "1068102645")

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
EMPLOYEES = {
    "–°—Ç–µ–ø–∞–Ω—Ü–µ–≤ –ï–≥–æ—Ä –ü–µ—Ç—Ä–æ–≤–∏—á": "16.01",
    "–ì–æ–Ω—á–∞—Ä–æ–≤ –ì—Ä–∏–≥–æ—Ä–∏–π –ï–≤–≥–µ–Ω—å–µ–≤–∏—á": "21.01",
    "–î–æ–±—Ä–æ–ª—é–±—Ü–µ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞": "21.01",
    "–®—É–º–∫–∏–Ω –ê–ª–µ–∫—Å–µ–π –ú–∞–∫—Å–∏–º–æ–≤–∏—á": "28.01",
    "–©–µ–±–ª–∞–∫–æ–≤–∞ –í–∞–ª–µ—Ä–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞": "31.01",
    "–ì–µ—Ä–∞—Å–∏–º–æ–≤–∞ –ê–Ω–Ω–∞ –í–∞–ª–µ—Ä—å–µ–≤–Ω–∞": "03.02",
    "–ï—Ä–º–æ–ª–æ–≤ –ê–ª–µ–∫—Å–µ–π –ê–Ω–¥—Ä–µ–µ–≤–∏—á": "07.02",
    "–ì–∞–∞–≥ –í–∏–∫—Ç–æ—Ä –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á": "07.03",
    "–ü–∞–ª—å—á–∏–∫–æ–≤–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞": "10.04",
    "–ì—Ä–∞–±–æ–≤ –ò–≤–∞–Ω –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á": "12.05",
    "–ú–µ–¥–≤–µ–¥–µ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ê–Ω–¥—Ä–µ–µ–≤–Ω–∞": "21.07",
    "–°–µ—Ä–≥–µ–µ–≤–∞ –û–ª—å–≥–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞": "23.08",
    "–ë–∞—Å–∞–ª–∞–µ–≤ –í–ª–∞–¥–∏—Å–ª–∞–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á": "27.09",
    "–ü—Ä–æ—Ö–æ—Ä–æ–≤–∞ –í–∏–∫—Ç–æ—Ä–∏—è –ê–ª–µ–∫—Å–µ–µ–≤–Ω–∞": "17.10",
    "–ì–ª—É—Ö–æ–≤ –ù–∏–∫–∏—Ç–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–∏—á": "05.11",
    "–ü–∞–≤–ª–æ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞": "23.11",
    "–ö—Ä—é–∫–æ–≤ –í–∞–¥–∏–º –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á": "13.12"
}

def get_upcoming_birthdays():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ 5 –¥–Ω–µ–π"""
    today = datetime.now()
    target_date = today + timedelta(days=5)
    target_day_month = target_date.strftime("%d.%m")
    
    upcoming = []
    for name, birthday in EMPLOYEES.items():
        if birthday == target_day_month:
            upcoming.append(name)
    
    return upcoming

def get_birthday_message(names):
    """–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –¥–Ω—è—Ö —Ä–æ–∂–¥–µ–Ω–∏—è"""
    if len(names) == 1:
        return f"üéâ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: —á–µ—Ä–µ–∑ 5 –¥–Ω–µ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —É {names[0]}!"
    else:
        names_str = ", ".join(names[:-1]) + f" –∏ {names[-1]}"
        return f"üéâ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: —á–µ—Ä–µ–∑ 5 –¥–Ω–µ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —É {names_str}!"

async def send_birthday_notification():
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–Ω—è—Ö —Ä–æ–∂–¥–µ–Ω–∏—è"""
    bot = Bot(token=BOT_TOKEN)
    
    try:
        upcoming_birthdays = get_upcoming_birthdays()
        
        if upcoming_birthdays:
            message = get_birthday_message(upcoming_birthdays)
            await bot.send_message(chat_id=CHAT_ID, text=message)
            logger.info(f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: {message}")
        else:
            logger.info("üìÖ –°–µ–≥–æ–¥–Ω—è –Ω–∏–∫—Ç–æ –Ω–µ –ø—Ä–∞–∑–¥–Ω—É–µ—Ç —á–µ—Ä–µ–∑ 5 –¥–Ω–µ–π")
    
    except TelegramError as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ Telegram: {e}")
    except Exception as e:
        logger.error(f"‚ùå –û–±—â–∞—è –æ—à–∏–±–∫–∞: {e}")

async def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞"""
    logger.info("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ –æ–±–ª–∞–∫–µ")
    
    # –î–ª—è Railway, Heroku –∏ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º - –∑–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
    while True:
        current_time = datetime.now()
        logger.info(f"üïê –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: {current_time.strftime('%H:%M:%S %d.%m.%Y')}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 —É—Ç—Ä–∞ (–º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è)
        if current_time.hour == 6:  # UTC+3 –¥–ª—è –ú–æ—Å–∫–≤—ã = 9:00 MSK
            await send_birthday_notification()
            # –ñ–¥–µ–º —á–∞—Å, —á—Ç–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥—É–±–ª–∏
            await asyncio.sleep(3600)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
        await asyncio.sleep(600)

# –î–ª—è —Ä–∞–∑–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è GitHub Actions)
async def check_once():
    """–†–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–¥–∞—á"""
    logger.info("üîç –†–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è")
    await send_birthday_notification()

if __name__ == "__main__":
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–∞ –ª–∏ —Ä–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
    run_once = os.environ.get('RUN_ONCE', 'false').lower() == 'true'
    
    if run_once:
        print("üîç –ó–∞–ø—É—Å–∫ —Ä–∞–∑–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏...")
        asyncio.run(check_once())
    else:
        print("ü§ñ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã...")
        print("üìÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 –ú–°–ö")
        print("‚è∞ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 5 –¥–Ω–µ–π –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è")
        
        try:
            asyncio.run(main())
        except KeyboardInterrupt:
            print("\nüõë –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        except Exception as e:
            print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")
            # –í –æ–±–ª–∞—á–Ω–æ–π —Å—Ä–µ–¥–µ –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É
            asyncio.run(main())
