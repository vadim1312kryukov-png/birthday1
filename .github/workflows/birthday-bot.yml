name: Birthday Bot Notifications

# –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 6:00 UTC (9:00 –ú–°–ö)
on:
  schedule:
    - cron: '0 6 * * *'  # 6:00 UTC = 9:00 –ú–°–ö
  
  # –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
  workflow_dispatch:
    inputs:
      test_mode:
        description: 'Test mode (send test message)'
        required: false
        default: 'false'
        type: boolean

jobs:
  send-birthday-notifications:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install requests
    
    - name: Send birthday notifications
      env:
        BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
        CHAT_ID: ${{ secrets.CHAT_ID }}
      run: |
        if [ "${{ github.event.inputs.test_mode }}" = "true" ]; then
          echo "üß™ Running in test mode"
          python birthday_bot.py test
        else
          echo "üìÖ Running daily birthday check"
          python birthday_bot.py
        fi
    
    - name: Log completion
      run: |
        echo "‚úÖ Birthday bot check completed at $(date)"
